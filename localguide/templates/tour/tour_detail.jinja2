{% extends "layout_tour_detail.jinja2" %}

{% block content %}

<div class="row">
	<!-- Left panel-->	
	<div class="col-md-8">
		<section class="form2 cid-rccAB2jr1U" style="padding-top:0px;padding-bottom:0px;" id="tourDetail">
			<div class="row">
				<div class="col-md-12">
					<img name="banner" class="img-fluid rounded" src="{{ request.static_url('localguide:static/assets/user_images/guide/') }}{{tour.Tour.uid}}/{{tour.Tour.banner}}" alt="" style="width:900px;height:300px;">	
				</div>
			</div>
			<div class="row">
				<div class="col-md-9">
					<h4 class="mbr-fonts-style pb-1 pt-3 mbr-bold display-2">{{tour.Tour.title}}</h4>
					<p class="mbr-text mbr-fonts-style mbr-normal display-5">{{tour.Tour.type}}</p>
					<div class="social-list py-1">
						<div class="soc-item">
							<a href="#" target="_blank">
								<div class="mbr-iconfont mbr-iconfont-social socicon-facebook socicon" media-simple="true"></div>
							</a>
						</div>
						<div class="soc-item">
							<a href="#" target="_blank">
								<div class="mbr-iconfont mbr-iconfont-social socicon-twitter socicon"  media-simple="true"></div>
							</a>
						</div>
						<div class="soc-item">
							<a href="#" target="_blank">
								<div class="mbr-iconfont mbr-iconfont-social socicon-googleplus socicon"  media-simple="true"></div>
							</a>
						</div>
						<div class="soc-item">
							<a href="#" target="_blank">
								<div class="mbr-iconfont mbr-iconfont-social socicon-skype socicon"  media-simple="true"></div>
							</a>
						</div>
						<div class="soc-item">
							<a href="#" target="_blank">
								<div class="mbr-iconfont mbr-iconfont-social socicon-instagram socicon" media-simple="true"></div>
							</a>
						</div>
					</div>
				</div>
				<div class="col-md-3 card" style="align-items: center;">
					<div class="card-wrappers">
						<div class="card-img">
							<img src="{{ request.static_url('localguide:static/assets/user_images/guide/') }}{{tour.Tour.uid}}/{{tour.avatar}}" @click="userProfile('{{tour.id}}', '{{tour.Tour.uid}}')" style="cursor: pointer;" alt="profile">
						</div>
					</div>
					<div class="mbr-author-name mbr-bold mbr-fonts-style display-8">
						{{tour.fullname}}
						<span class="badge badge-warning" alt="professional tour guide">
							{%if tour.level == '0'%}
								jun
							{%elif tour.level == '1'%}
								sen
							{%elif tour.level == '2'%}
								pro
							{%endif%}
						</span>
					</div>
				</div>
			</div>
			<hr>			
			<div class="row">
				<div class="col-md-12 card">
					<h5 class="mbr-fonts-style pb-1 pt-1 mbr-bold display-4">DESCRIPTION ABOUT TOUR</h5>
					<span class="card-text">
						{{tour.Tour.content.replace("\\'","'")|safe}}
					</span>
				</div>
				<div class="col-md-12">
					<h5 class="mbr-fonts-style pb-1 pt-1 mbr-bold display-4">PHOTOS</h5>
					<div v-if="num > 3">
						<vueper-slides class="no-shadow" :visible-slides="3" slide-multiple :slide-ratio="1/4" :dragging-distance="70" autoplay :arrows="true" :bullets="false">
							<vueper-slide v-for="i in photos" :key="i" title="" :image="thumbnailDir+i.name"></vueper-slide>
						</vueper-slides>
					</div>
					<div v-else>
						<vueper-slides class="no-shadow" :visible-slides="3" slide-multiple :slide-ratio="1/4" :dragging-distance="70" autoplay :arrows="false" :bullets="false">
							<vueper-slide v-for="i in photos" :key="i" title="" :image="thumbnailDir+i.name"></vueper-slide>
						</vueper-slides>
					</div>
					<div class="pt-2 col-md-12 col-lg-12 align-center">
						<h5 class="mbr-fonts-style display-4"><small><a href="#" v-for="thumb in 1" @click="showLightbox(thumb.name)">View in large mode</a></small></h5>
					</div>					
					<lightbox id="mylightbox" 
						ref="lightbox"
						:images="images"
						:directory="thumbnailDir"
						:filter="galleryFilter"
						:timeoutDuration="5000"
					/>			
				</div>
				<div class="col-md-12">
					<!-- Related Projects Row -->
					<hr>
					<h5 class="mbr-fonts-style pb-1 pt-1 mbr-bold display-4">OTHER TOURS</h5>
					<div class="row">
						<div class="col-md-3 col-sm-6 mb-4">
							<a href="#"><img class="img-fluid" src="https://placehold.it/500x300" alt=""></a>
						</div>

						<div class="col-md-3 col-sm-6 mb-4">
							<a href="#"><img class="img-fluid" src="https://placehold.it/500x300" alt=""></a>
						</div>

						<div class="col-md-3 col-sm-6 mb-4">
							<a href="#"><img class="img-fluid" src="https://placehold.it/500x300" alt=""></a>
						</div>

						<div class="col-md-3 col-sm-6 mb-4">
							<a href="#"><img class="img-fluid" src="https://placehold.it/500x300" alt=""></a>
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>
	<!-- Right panel -->
	<div class="col-md-4">
		<section class="form2 cid-rccOyRMpwz" style="padding-top:0px;padding-bottom:0px;" id="tourBook">
			<div>
				<b-modal ref="myModalRef" hide-footer no-close-on-esc no-close-on-backdrop centered title="Payment success">
					<div class="d-block text-center">
						<h5>Thanks for you Payment !</h5>
						<p class="card-text mbr-fonts-style">
							Please check mail.
							You can refund in 30 days.
						</p>
					</div>
					<!--<b-btn class="mt-1" @click="hideModal">Go to Home</b-btn>-->
					<button @click="hideModal" class="btn btn-form btn-secondary" style="width:95%">Go Home</button>
				</b-modal>
        	</div>
			<div class="row row-content justify-content-center">
				<div class="card book-card col-md-12">
					<div class="card-wrapper">
						<div class="card-img">
							<div class="price-box">
								<h5 class="price mbr-fonts-style mbr-bold display-4">{{tour.Tour.price}}$</h5>
							</div>
							<img name="banner" class="img-fluid rounded" src="{{ request.static_url('localguide:static/assets/user_images/guide/') }}{{tour.Tour.uid}}/{{tour.Tour.banner}}" alt="localguide">	
						</div>
						<div class="card-box">
							<p class="card-text mbr-fonts-style">
								{{tour.Tour.short_desc}}
								<br>
								<i class="fa fa-money"></i><b>{{tour.Tour.price}}$</b>
								<i class="fa fa-calendar"></i><b>{{tour.Tour.days}} days</b><br>
								<i class="fa fa-flag"></i><b>{{tour.Tour.country}}</b>
								<i class="fa fa-building"></i><b>{{tour.Tour.city}}</b>
							</p>
							<div class="ico-line-wrap">
								<div class="ico-line">
									<div class="px-1 pb-3 mbr-iconfont mbr-iconfont-social mbri-star" style="color: rgb(30, 198, 182); fill: rgb(30, 198, 182);" media-simple="true"></div>
									<div class="px-1 pb-3 mbr-iconfont mbr-iconfont-social mbri-star" style="color: rgb(30, 198, 182); fill: rgb(30, 198, 182);" media-simple="true"></div>
									<div class="px-1 pb-3 mbr-iconfont mbr-iconfont-social mbri-star" style="color: rgb(30, 198, 182); fill: rgb(30, 198, 182);" media-simple="true"></div>
									<div class="px-1 pb-3 mbr-iconfont mbr-iconfont-social mbri-star" style="color: rgb(158, 158, 158); fill: rgb(158, 158, 158);" media-simple="true"></div>
									<div class="px-1 pb-3 pr-2 mbr-iconfont mbr-iconfont-social mbri-star" style="color: rgb(158, 158, 158); fill: rgb(158, 158, 158);" media-simple="true"></div>
									<h3 class="rev mbr-fonts-style mbr-bold display-4">4 reviews</h3>
								</div>
							</div>
							<p class="card-text mbr-fonts-style"><a href="#" data-toggle="modal" data-target="#tour_calendar">Confirm tour schedule</a></p>
							<hr/>
							<form @submit.prevent="processForm">
								<div class="form-group">
									<label class="card-text mbr-fonts-style display-4"><b>Name on card</b></label>
									<input type="text" name="name_card" ref="name_card" v-model="name_card" v-validate="'required|max:50'" class="form-control" placeholder="Name on card" autocapitalize="off" autocorrect="off" maxlength="80">
									<span v-show="errors.has('name_card')" class="is-error">${ errors.first('name_card') }</span>
								</div>
								<div class="form-group">
									<label class="card-text mbr-fonts-style display-4"><b>Your email</b></label>
									<input type="text" name="email" ref="email" v-model="email" v-validate="'required|email'" class="form-control" placeholder="Your email" autocapitalize="off" autocorrect="off" maxlength="80">
									<span v-show="errors.has('email')" class="is-error">${ errors.first('email') }</span>
								</div>
								<div class="form-group">
									<label class="card-text mbr-fonts-style display-4"><b>Your phone</b></label>
									<input type="text" name="phone" ref="phone" v-model="phone" v-validate="'required'" class="form-control" placeholder="Your phone" autocapitalize="off" autocorrect="off" maxlength="11">
									<span v-show="errors.has('phone')" class="is-error">${ errors.first('phone') }</span>
								</div>
								<hr/>
								<div>
									<vue-stripe-checkout
										ref="checkoutRef"
										:image="image"
										:name="name"
										:description="description"
										:currency="currency"
										:amount="price"
										:panelLabel="panelLabel"
										:email="email"
										@done="done"
										@opened="opened"
										@closed="closed"
									></vue-stripe-checkout>
									<span class="input-group-btn" style="align-items: center;">
										<!--<button type="submit" @click="checkout" class="btn btn-form btn-primary btn-lg display-4" style="width:90%" v-if="status=='Closed'" :disabled="errors.any()">Pay {{tour.Tour.price}}$ </button> -->
										<button class="btn btn-form btn-primary btn-lg display-4" style="width:90%" v-if="status=='Closed'" :disabled="errors.any()">Pay {{tour.Tour.price}}$ </button>
										<button class="btn btn-form btn-primary btn-lg display-4" style="width:90%" v-else="status=='Opened'">Please wait</button>
									</span>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>	
		</section>
		<section class="form2 cid-rccAB2jr1U">
			<div class="col-md-12 col-lg-12 align-center">
				<i class="fa fa-bug" style="color:red;"></i><h5 class="mbr-fonts-style display-4"><small><a href="#" data-toggle="modal" data-target="#tour_reportModal">Report this tour/guide</a></small></h5>
			</div>
		</section>	
	</div>
</div>

<!-- Tour calendar-->
<div>
	<div class="modal fade bd-example-modal-lg" id="tour_calendar" tabindex="-1" role="dialog" aria-labelledby="DisableModal" aria-hidden="true">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Tour schedule</h5>
					<button class="close" type="button" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">×</span>
					</button>
				</div>
				<div class="modal-body">
					<div id='calendar'></div>
					<div style='clear:both'></div>
				</div>
				<!--
				<div class="modal-footer">
					<button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
					<button class="btn btn btn-danger" type="button" data-dismiss="modal" @click="tour_disable">Disable</button>
				</div>
				-->
			</div>
		</div>
	</div>
</div>
{% include "../common/tour_report_modal.jinja2" %}
{% endblock content %}
